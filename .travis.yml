language: haskell

notifications:
  email:
    recipients:
      - roland@tritsch.org
    on_success: always
    on_failure: always

sudo: required

cache:
  directories:
    - ~/rolandtritsch/haskell-aoc-2018/.stack-work
    - ~/rolandtritsch/haskell-aoc-2018/dist
    - ~/.stack
    - ~/.eta
    - ~/.etlas

before_install:
  - curl -sSL https://get.haskellstack.org/ | sh
  - stack build --dry-run
  - curl -O https://cdnverify.eta-lang.org/eta-binaries/etlas-1.5.0.0/binaries/x86_64-linux/etlas
  - chmod 700 etlas
  - mv etlas ~/bin
  - yes | etlas update
  - etlas select latest

script:
  - travis_wait 60 ./bin/run.sh

branches:
  only:
    - master

env:
  - DAY=00 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=00 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=00 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=00 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=00 PART=1 TYPE=EXE LANG=ETA
  - DAY=00 PART=2 TYPE=EXE LANG=ETA
  - DAY=00 PART=1 TYPE=TEST LANG=ETA
  - DAY=00 PART=2 TYPE=TEST LANG=ETA
  - DAY=01 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=01 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=01 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=01 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=01 PART=1 TYPE=EXE LANG=ETA
  - DAY=01 PART=2 TYPE=EXE LANG=ETA
  - DAY=01 PART=1 TYPE=TEST LANG=ETA
  - DAY=01 PART=2 TYPE=TEST LANG=ETA
  - DAY=02 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=02 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=02 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=02 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=02 PART=1 TYPE=EXE LANG=ETA
  - DAY=02 PART=2 TYPE=EXE LANG=ETA
  - DAY=02 PART=1 TYPE=TEST LANG=ETA
  - DAY=02 PART=2 TYPE=TEST LANG=ETA
  - DAY=03 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=03 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=03 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=03 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=03 PART=1 TYPE=EXE LANG=ETA
  - DAY=03 PART=2 TYPE=EXE LANG=ETA
  - DAY=03 PART=1 TYPE=TEST LANG=ETA
  - DAY=03 PART=2 TYPE=TEST LANG=ETA
  - DAY=04 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=04 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=04 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=04 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=04 PART=1 TYPE=EXE LANG=ETA
  - DAY=04 PART=2 TYPE=EXE LANG=ETA
  - DAY=04 PART=1 TYPE=TEST LANG=ETA
  - DAY=04 PART=2 TYPE=TEST LANG=ETA
  - DAY=05 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=05 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=05 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=05 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=05 PART=1 TYPE=EXE LANG=ETA
  - DAY=05 PART=2 TYPE=EXE LANG=ETA
  - DAY=05 PART=1 TYPE=TEST LANG=ETA
  - DAY=05 PART=2 TYPE=TEST LANG=ETA
  - DAY=06 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=06 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=06 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=06 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=06 PART=1 TYPE=EXE LANG=ETA
  - DAY=06 PART=2 TYPE=EXE LANG=ETA
  - DAY=06 PART=1 TYPE=TEST LANG=ETA
  - DAY=06 PART=2 TYPE=TEST LANG=ETA
  - DAY=07 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=07 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=07 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=07 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=07 PART=1 TYPE=EXE LANG=ETA
  - DAY=07 PART=2 TYPE=EXE LANG=ETA
  - DAY=07 PART=1 TYPE=TEST LANG=ETA
  - DAY=07 PART=2 TYPE=TEST LANG=ETA
  - DAY=08 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=08 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=08 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=08 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=08 PART=1 TYPE=EXE LANG=ETA
  - DAY=08 PART=2 TYPE=EXE LANG=ETA
  - DAY=08 PART=1 TYPE=TEST LANG=ETA
  - DAY=08 PART=2 TYPE=TEST LANG=ETA
  - DAY=09 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=09 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=09 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=09 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=09 PART=1 TYPE=EXE LANG=ETA
  - DAY=09 PART=2 TYPE=EXE LANG=ETA
  - DAY=09 PART=1 TYPE=TEST LANG=ETA
  - DAY=09 PART=2 TYPE=TEST LANG=ETA
  - DAY=10 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=10 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=10 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=10 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=10 PART=1 TYPE=EXE LANG=ETA
  - DAY=10 PART=2 TYPE=EXE LANG=ETA
  - DAY=10 PART=1 TYPE=TEST LANG=ETA
  - DAY=10 PART=2 TYPE=TEST LANG=ETA
  - DAY=11 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=11 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=11 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=11 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=11 PART=1 TYPE=EXE LANG=ETA
  - DAY=11 PART=2 TYPE=EXE LANG=ETA
  - DAY=11 PART=1 TYPE=TEST LANG=ETA
  - DAY=11 PART=2 TYPE=TEST LANG=ETA
  - DAY=12 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=12 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=12 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=12 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=12 PART=1 TYPE=EXE LANG=ETA
  - DAY=12 PART=2 TYPE=EXE LANG=ETA
  - DAY=12 PART=1 TYPE=TEST LANG=ETA
  - DAY=12 PART=2 TYPE=TEST LANG=ETA
  - DAY=13 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=13 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=13 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=13 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=13 PART=1 TYPE=EXE LANG=ETA
  - DAY=13 PART=2 TYPE=EXE LANG=ETA
  - DAY=13 PART=1 TYPE=TEST LANG=ETA
  - DAY=13 PART=2 TYPE=TEST LANG=ETA
  - DAY=14 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=14 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=14 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=14 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=14 PART=1 TYPE=EXE LANG=ETA
  - DAY=14 PART=2 TYPE=EXE LANG=ETA
  - DAY=14 PART=1 TYPE=TEST LANG=ETA
  - DAY=14 PART=2 TYPE=TEST LANG=ETA
  - DAY=15 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=15 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=15 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=15 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=15 PART=1 TYPE=EXE LANG=ETA
  - DAY=15 PART=2 TYPE=EXE LANG=ETA
  - DAY=15 PART=1 TYPE=TEST LANG=ETA
  - DAY=15 PART=2 TYPE=TEST LANG=ETA
  - DAY=16 PART=1 TYPE=EXE LANG=HASKELL
  - DAY=16 PART=2 TYPE=EXE LANG=HASKELL
  - DAY=16 PART=1 TYPE=TEST LANG=HASKELL
  - DAY=16 PART=2 TYPE=TEST LANG=HASKELL
  - DAY=16 PART=1 TYPE=EXE LANG=ETA
  - DAY=16 PART=2 TYPE=EXE LANG=ETA
  - DAY=16 PART=1 TYPE=TEST LANG=ETA
  - DAY=16 PART=2 TYPE=TEST LANG=ETA

matrix:
  exclude:
    - env: DAY=09 PART=2 TYPE=TEST LANG=ETA
    - env: DAY=10 PART=1 TYPE=TEST LANG=ETA
    - env: DAY=10 PART=2 TYPE=TEST LANG=ETA
